(()=>{"use strict";var __webpack_modules__={290:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$X:()=>addTaskFormOpenClose,ZJ:()=>addProjectBtn,pR:()=>addTaskBtn,wZ:()=>inboxController});var _project_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_task_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(507),_localStorage_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(158);let current=0;const addTaskFormOpenClose=function(e,t,o){const c=document.querySelector(e),r=document.querySelector(t),a=document.querySelector(o);c.addEventListener("click",(()=>{a.classList.add("active")})),r.addEventListener("click",(()=>{a.classList.remove("active")}))},closeForm=function(){document.querySelector(".customProjForm").classList.remove("active"),document.querySelector(".projectName").value=""},openForm=function(){document.querySelector(".customProjForm").classList.add("active")},getNewData=function(){return document.querySelectorAll("[data-project]").length},getNewDataTask=function(){return document.querySelectorAll("[data-task]").length},addProject=function(e){const t=getNewData(),o=document.querySelector(".customProjList"),c=document.querySelector("#projForm"),r=document.createElement("div"),a=document.createElement("button"),_=document.createElement("p");r.classList.add("customProj"),r.setAttribute("data-project",`${t}`),_.textContent=e;const n=new _project_js__WEBPACK_IMPORTED_MODULE_0__.Z(e);_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB.push(n),a.setAttribute("data-btn",`${t}`),a.textContent="X",r.appendChild(_),r.appendChild(a),_.addEventListener("click",(()=>{changeProject(r.getAttribute("data-project"))})),a.addEventListener("click",(()=>{r.remove();let e=document.querySelectorAll("[data-project]");_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB.splice(t,1);for(let t=0;t<e.length;t++)e[t].setAttribute("data-project",t)})),o.insertBefore(r,c)},addProjectBtn=function(){const e=document.querySelector(".customProjBtn"),t=document.querySelector("button.close"),o=document.querySelector("button.add");e.addEventListener("click",(()=>{openForm()})),t.addEventListener("click",(()=>{closeForm()})),o.addEventListener("click",(e=>{e.preventDefault();let t=document.querySelector(".projectName");addProject(t.value),closeForm()}))},addTask=function(){let e=_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB[current],t=document.querySelector("#taskTitle").value,o=document.querySelector("#taskDesc").value,c=document.querySelector("#taskDate").value,r=document.querySelector("#taskPrior").value;""===c&&(c="No date");const a=new _task_js__WEBPACK_IMPORTED_MODULE_2__.Z(t,o,c,r),_=document.querySelector(".taskForm");e.list.push(a),_.classList.remove("active"),o="",c="",r="",showTask(a)},inboxController=function(){document.querySelector("#inbox").addEventListener("click",(()=>{changeProject(0)}))},addTaskBtn=function(){document.querySelector("#addTask").addEventListener("click",(()=>{addTask(),document.querySelector("#taskTitle").value="",document.querySelector("#taskDesc").value="",document.querySelector("#taskDate").value="",document.querySelector("#taskPrior").value="0"}))},changeProject=function(e){const t=document.querySelector("#projectName"),o=_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB[e].title;document.querySelector("section").innerHTML="",_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB[e].list.forEach((e=>{showTask(e)})),t.textContent=o,console.log(_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB),current=e},renderTask=function(task){let index=getNewDataTask();const taskBox=document.createElement("div");taskBox.classList.add("task"),taskBox.setAttribute("data-task",`${index}`);const completedInput=document.createElement("input");completedInput.setAttribute("type","checkbox"),completedInput.addEventListener("change",(()=>{task.completed=!task.completed,console.log(task)}));const div1=document.createElement("div"),div2=document.createElement("div");div2.classList.add("titlenpri");const title=document.createElement("span");title.classList.add("title"),title.textContent=task.title;const prior=document.createElement("span");prior.classList.add("prior");const starImg0=document.createElement("img"),starImg1=document.createElement("img"),starImg2=document.createElement("img");starImg0.src="images/star-fill.svg",starImg1.src="images/star-fill.svg",starImg2.src="images/star-fill.svg";let i=0;do{eval(`prior.appendChild(starImg${i});`),i++}while(task.priority>=i);const desc=document.createElement("span");desc.classList.add("desc"),desc.textContent=task.desc;const date=document.createElement("span");date.classList.add("dueDate"),date.textContent=task.dueDate;const deleteBtn=document.createElement("button");return deleteBtn.textContent="Delete",deleteBtn.addEventListener("click",(()=>{taskBox.remove();const e=document.querySelectorAll("[data-task]");_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB[current].list.splice(index,1);for(let t=0;t<e.length;t++)e[t].setAttribute("data-task",t);console.log(_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB)})),div2.appendChild(title),div2.appendChild(prior),div1.appendChild(div2),div1.appendChild(desc),div1.appendChild(date),taskBox.appendChild(completedInput),taskBox.appendChild(div1),taskBox.appendChild(deleteBtn),taskBox},showTask=function(e){document.querySelector("section").appendChild(renderTask(e))}},158:(e,t,o)=>{o.d(t,{mB:()=>c});let c=[]},15:(e,t,o)=>{o.d(t,{Z:()=>c});class c{constructor(e){this.title=e,this.list=[]}add(e){this.list.push(e)}}},507:(e,t,o)=>{o.d(t,{Z:()=>c});class c{constructor(e,t,o,c,r=!1){this.title=e,this.desc=t,this.dueDate=o,this.priority=c,this.completed=r}set isCompleted(e){this.completed=e}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e=__webpack_require__(15),t=__webpack_require__(158),o=__webpack_require__(290);let c=new e.Z("Inbox");t.mB.push(c),console.log(t.mB),(0,o.$X)(".addTask",".closeBtn",".taskForm"),(0,o.ZJ)(),(0,o.pR)(),(0,o.wZ)()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxHQVlsQjdDLFFBQVFDLElBQUksT0FDWixRQUFxQixXQUFZLFlBQWEsY0FDOUMsV0FDQSxXQUNBLFMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvZGlzcGxheUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2xvY2FsU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdC5qc1wiO1xyXG5pbXBvcnQgVGFzayBmcm9tIFwiLi90YXNrLmpzXCI7XHJcbmltcG9ydCB7IHBvcHVsYXRlU3RvcmFnZSwgcmV0cml2ZVN0b3JhZ2UsIHByb2plY3RzTGlzdCwgZGVsZXRlUHJvamVjdExTLCBzaG93U3RvcmFnZSB9IGZyb20gXCIuL2xvY2FsU3RvcmFnZS5qc1wiO1xyXG5cclxubGV0IGN1cnJlbnQgPSAwO1xyXG5jb25zdCBhZGRUYXNrRm9ybU9wZW5DbG9zZSA9IGZ1bmN0aW9uKG9wZW4sIGNsb3NlLCBmb3JtKSB7XHJcbiAgICBjb25zdCBvcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcGVuKTtcclxuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbG9zZSk7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtKTtcclxuXHJcbiAgICAvL29wZW4gZm9ybSBmb3IgYWRkaW5nIHRhc2tcclxuICAgIG9wZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICAgIC8vY2xvc2UgZm9ybSBmb3IgYWRkaW5nIHRhc2tcclxuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgZm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG4vL2Nsb3NlIHByb2plY3QgYWRkIGZvcm1cclxuY29uc3QgY2xvc2VGb3JtID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBhZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXN0b21Qcm9qRm9ybVwiKTtcclxuICAgIGFkZEZvcm0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuXHJcbiAgICBsZXQgaW5wdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdE5hbWVcIik7XHJcbiAgICBpbnB1dEZpZWxkLnZhbHVlID0gXCJcIlxyXG59XHJcblxyXG4vL29wZW4gcHJvamVjdCBhZGQgZm9ybVxyXG5jb25zdCBvcGVuRm9ybSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgYWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tUHJvakZvcm1cIik7XHJcbiAgICBhZGRGb3JtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbn1cclxuXHJcbi8vZ2V0IG51bWJlciBvZiBwcm9qZWN0c1xyXG5jb25zdCBnZXROZXdEYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBhbGxQcm9qID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXByb2plY3RdXCIpOyBcclxuICAgIHJldHVybiBhbGxQcm9qLmxlbmd0aDtcclxufVxyXG5cclxuY29uc3QgZ2V0TmV3RGF0YVRhc2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGFsbFRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXRhc2tdXCIpOyBcclxuICAgIHJldHVybiBhbGxUYXNrcy5sZW5ndGg7XHJcbn1cclxuXHJcbi8vYWRkIHByb2plY3QgdG8gdGhlIGxpc3RcclxuY29uc3QgYWRkUHJvamVjdCA9IGZ1bmN0aW9uKHRpdGxlKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGdldE5ld0RhdGEoKTtcclxuICAgIGNvbnN0IHByb2pMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXN0b21Qcm9qTGlzdFwiKTtcclxuICAgIGNvbnN0IGFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2pGb3JtXCIpO1xyXG5cclxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cclxuICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tUHJvalwiKTtcclxuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3RcIiwgYCR7aW5kZXh9YCk7XHJcbiAgICBwLnRleHRDb250ZW50ID0gdGl0bGU7XHJcblxyXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0KHRpdGxlKTtcclxuICAgIHByb2plY3RzTGlzdC5wdXNoKG5ld1Byb2plY3QpO1xyXG4gICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNMaXN0KTtcclxuICAgIC8vIHBvcHVsYXRlU3RvcmFnZShwcm9qZWN0c0xpc3QpO1xyXG4gICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNMaXN0KTtcclxuICAgIC8vIHNob3dTdG9yYWdlKCk7XHJcblxyXG4gICAgZGVsZXRlQnRuLnNldEF0dHJpYnV0ZShcImRhdGEtYnRuXCIsIGAke2luZGV4fWApO1xyXG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJYXCI7XHJcblxyXG4gICAgZGl2LmFwcGVuZENoaWxkKHApO1xyXG4gICAgZGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XHJcbiAgICBwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlUHJvamVjdChkaXYuZ2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QnKSk7XHJcbiAgICB9KVxyXG5cclxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGRpdi5yZW1vdmUoKTtcclxuICAgICAgICBsZXQgYWxsRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1wcm9qZWN0XVwiKTtcclxuICAgICAgICBwcm9qZWN0c0xpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0c0xpc3QpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhbGxEaXZzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgYWxsRGl2c1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdCcsIGkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBwcm9qTGlzdC5pbnNlcnRCZWZvcmUoZGl2LCBhZGRGb3JtKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RzTGlzdCk7XHJcbn1cclxuXHJcblxyXG4vL2NvbnRyb2wgYWRkIHByb2plY3QgZnJvbSBidXR0b25zXHJcbmNvbnN0IGFkZFByb2plY3RCdG4gPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tUHJvakJ0blwiKTtcclxuICAgIGNvbnN0IGNsb3NlRm9ybUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24uY2xvc2VcIilcclxuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24uYWRkXCIpO1xyXG5cclxuICAgIGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIG9wZW5Gb3JtKCk7XHJcbiAgICB9KVxyXG5cclxuICAgIGNsb3NlRm9ybUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNsb3NlRm9ybSgpO1xyXG4gICAgfSlcclxuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgLy8gbGV0IGluZGV4ID0gZ2V0TmV3RGF0YSgpO1xyXG4gICAgICAgIGxldCBpbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0TmFtZVwiKTtcclxuICAgICAgICBhZGRQcm9qZWN0KGlucHV0RmllbGQudmFsdWUpO1xyXG4gICAgICAgIGNsb3NlRm9ybSgpO1xyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcblxyXG5jb25zdCBhZGRUYXNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICBsZXQgY3VycmVudFByb2ogPSBwcm9qZWN0c0xpc3RbY3VycmVudF07XHJcbiAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tUaXRsZVwiKS52YWx1ZTtcclxuICAgIGxldCBkZXNjID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrRGVzY1wiKS52YWx1ZTtcclxuICAgIGxldCBkYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrRGF0ZVwiKS52YWx1ZTtcclxuICAgIGxldCBwcmlvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza1ByaW9yXCIpLnZhbHVlO1xyXG4gICAgaWYoZGF0ZSA9PT0gXCJcIil7XHJcbiAgICAgICAgZGF0ZSA9IFwiTm8gZGF0ZVwiXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3VGFzayA9IG5ldyBUYXNrKHRpdGxlLCBkZXNjLCBkYXRlLCBwcmlvcik7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrRm9ybVwiKTtcclxuICAgIGN1cnJlbnRQcm9qLmxpc3QucHVzaChuZXdUYXNrKTtcclxuICAgIGZvcm1Cb3guY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgIGRlc2MgPSBcIlwiO1xyXG4gICAgZGF0ZSA9IFwiXCI7XHJcbiAgICBwcmlvciA9IFwiXCI7XHJcbiAgICBzaG93VGFzayhuZXdUYXNrKVxyXG59XHJcblxyXG5jb25zdCBpbmJveENvbnRyb2xsZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGluYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNpbmJveFwiKTtcclxuICAgIGluYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlUHJvamVjdCgwKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IGFkZFRhc2tCdG4gPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkVGFza1wiKTtcclxuICAgIGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGFkZFRhc2soKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tUaXRsZVwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrRGVzY1wiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrRGF0ZVwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrUHJpb3JcIikudmFsdWUgPSBcIjBcIjtcclxuICAgIH0pXHJcbn1cclxuXHJcbmNvbnN0IGNoYW5nZVByb2plY3QgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgY29uc3QgcHJvakRpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2plY3ROYW1lXCIpO1xyXG4gICAgY29uc3QgcHJvak5hbWUgPSBwcm9qZWN0c0xpc3RbaWRdLnRpdGxlO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInNlY3Rpb25cIikuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIHByb2plY3RzTGlzdFtpZF0ubGlzdC5mb3JFYWNoKHRhc2sgPT4ge1xyXG4gICAgICAgIHNob3dUYXNrKHRhc2spXHJcbiAgICB9KVxyXG4gICAgcHJvakRpc3BsYXkudGV4dENvbnRlbnQgPSBwcm9qTmFtZTtcclxuICAgIGNvbnNvbGUubG9nKHByb2plY3RzTGlzdCk7XHJcbiAgICBjdXJyZW50ID0gaWQ7XHJcbn1cclxuXHJcbmNvbnN0IHJlbmRlclRhc2sgPSBmdW5jdGlvbih0YXNrKSB7XHJcbiAgICBsZXQgaW5kZXggPSBnZXROZXdEYXRhVGFzaygpO1xyXG4gICAgY29uc3QgdGFza0JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB0YXNrQm94LmNsYXNzTGlzdC5hZGQoXCJ0YXNrXCIpO1xyXG4gICAgdGFza0JveC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRhc2tcIiwgYCR7aW5kZXh9YCk7XHJcblxyXG4gICAgY29uc3QgY29tcGxldGVkSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICBjb21wbGV0ZWRJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XHJcbiAgICBjb21wbGV0ZWRJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICB0YXNrLmNvbXBsZXRlZCA9ICF0YXNrLmNvbXBsZXRlZDtcclxuICAgICAgICBjb25zb2xlLmxvZyh0YXNrKTtcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgZGl2MSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBjb25zdCBkaXYyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGRpdjIuY2xhc3NMaXN0LmFkZChcInRpdGxlbnByaVwiKTtcclxuXHJcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZChcInRpdGxlXCIpO1xyXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLnRpdGxlO1xyXG5cclxuICAgIGNvbnN0IHByaW9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICBwcmlvci5jbGFzc0xpc3QuYWRkKFwicHJpb3JcIik7XHJcbiAgICBjb25zdCBzdGFySW1nMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICBjb25zdCBzdGFySW1nMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICBjb25zdCBzdGFySW1nMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICBzdGFySW1nMC5zcmMgPSBcImltYWdlcy9zdGFyLWZpbGwuc3ZnXCI7XHJcbiAgICBzdGFySW1nMS5zcmMgPSBcImltYWdlcy9zdGFyLWZpbGwuc3ZnXCI7XHJcbiAgICBzdGFySW1nMi5zcmMgPSBcImltYWdlcy9zdGFyLWZpbGwuc3ZnXCI7XHJcblxyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgZG8ge1xyXG4gICAgICAgIGV2YWwoYHByaW9yLmFwcGVuZENoaWxkKHN0YXJJbWcke2l9KTtgKTtcclxuICAgICAgICBpKytcclxuICAgIH0gd2hpbGUodGFzay5wcmlvcml0eSA+PSBpKTtcclxuXHJcbiAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICBkZXNjLmNsYXNzTGlzdC5hZGQoXCJkZXNjXCIpO1xyXG4gICAgZGVzYy50ZXh0Q29udGVudCA9IHRhc2suZGVzYztcclxuXHJcbiAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICBkYXRlLmNsYXNzTGlzdC5hZGQoXCJkdWVEYXRlXCIpO1xyXG4gICAgZGF0ZS50ZXh0Q29udGVudCA9IHRhc2suZHVlRGF0ZTtcclxuXHJcbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJEZWxldGVcIjtcclxuXHJcbiAgICBkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICB0YXNrQm94LnJlbW92ZSgpO1xyXG4gICAgICAgIGNvbnN0IGFsbFRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXRhc2tdXCIpO1xyXG4gICAgICAgIHByb2plY3RzTGlzdFtjdXJyZW50XS5saXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGFsbFRhc2tzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgYWxsVGFza3NbaV0uc2V0QXR0cmlidXRlKCdkYXRhLXRhc2snLCBpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2cocHJvamVjdHNMaXN0KTtcclxuICAgIH0pXHJcblxyXG4gICAgZGl2Mi5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgICBkaXYyLmFwcGVuZENoaWxkKHByaW9yKTtcclxuXHJcbiAgICBkaXYxLmFwcGVuZENoaWxkKGRpdjIpO1xyXG4gICAgZGl2MS5hcHBlbmRDaGlsZChkZXNjKTtcclxuICAgIGRpdjEuYXBwZW5kQ2hpbGQoZGF0ZSk7XHJcbiAgICB0YXNrQm94LmFwcGVuZENoaWxkKGNvbXBsZXRlZElucHV0KTtcclxuICAgIHRhc2tCb3guYXBwZW5kQ2hpbGQoZGl2MSk7XHJcbiAgICB0YXNrQm94LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XHJcbiAgICBcclxuICAgIHJldHVybiB0YXNrQm94O1xyXG59XHJcblxyXG5jb25zdCBzaG93VGFzayA9IGZ1bmN0aW9uKHRhc2spe1xyXG4gICAgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJzZWN0aW9uXCIpO1xyXG4gICAgc2VjdGlvbi5hcHBlbmRDaGlsZChyZW5kZXJUYXNrKHRhc2spKTtcclxufVxyXG5cclxuXHJcbi8vRE9EQUogUkVUUklWRVBST0pFQ1RTXHJcblxyXG5cclxuXHJcbmV4cG9ydCB7IGFkZFRhc2tGb3JtT3BlbkNsb3NlLCBhZGRQcm9qZWN0QnRuLCBhZGRUYXNrQnRuLCBpbmJveENvbnRyb2xsZXIgfTsiLCJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0LmpzXCI7XHJcblxyXG5sZXQgcHJvamVjdHNMaXN0PSBbXTtcclxuZnVuY3Rpb24gcG9wdWxhdGVTdG9yYWdlKHByb2plY3RzKSB7XHJcbiAgICBpZihwcm9qZWN0cy5sZW5ndGggPj0gMCkge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgcHJvamVjdHNgLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVQcm9qZWN0TFMoaW5kZXgpIHtcclxuICAgIGxldCBwcm9qID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgcHJvamVjdHNgKSk7XHJcbiAgICBwcm9qLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICBwcm9qZWN0c0xpc3QgPSBwcm9qO1xyXG4gICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oYHByb2plY3RzYCwgSlNPTi5zdHJpbmdpZnkocHJvaikpO1xyXG4gICAgcG9wdWxhdGVTdG9yYWdlKHByb2plY3RzTGlzdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJldHJpdmVTdG9yYWdlKCkge1xyXG4gICAgbGV0IHByb2ogPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBwcm9qZWN0c2ApKTtcclxuICAgIGlmKHByb2ogIT09IG51bGwpIHtcclxuICAgICAgICBpZihwcm9qLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8PSBwcm9qLmxlbmd0aCAtIDE7ICBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBwcm9qW2ldLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXNrcyA9IHByb2pbaV0ubGlzdDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJvamVjdCA9IG5ldyBQcm9qZWN0KHByb2plY3ROYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBpZih0YXNrcy5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3QuYWRkKHRhc2spO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdHNMaXN0LnB1c2gocHJvamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dTdG9yYWdlKCkge1xyXG4gICAgLy8gcmV0cml2ZVN0b3JhZ2UoKVxyXG5cclxuICAgIGNvbnN0IHByb2pMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXN0b21Qcm9qTGlzdFwiKTtcclxuICAgIGNvbnN0IGFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmN1c3RvbVByb2pGb3JtXCIpO1xyXG4gICAgbGV0IHByb2ogPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBwcm9qZWN0c2ApKTtcclxuXHJcbiAgICBpZihwcm9qLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcHJvai5sZW5ndGg7IGkrKykgeyAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcHJvamVjdE5hbWUgPSBwcm9qW2ldLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChcImN1c3RvbVByb2pcIik7XHJcbiAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0XCIsIGAke2l9YCk7XHJcbiAgICAgICAgICAgICAgICBkaXYudGV4dENvbnRlbnQgPSBwcm9qZWN0TmFtZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBkZWxldGVCdG4uc2V0QXR0cmlidXRlKFwiZGF0YS1idG5cIiwgYCR7aX1gKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IFwiWFwiO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChkZWxldGVCdG4pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpdi5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGVQcm9qZWN0TFMoaSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcHJvakxpc3QuaW5zZXJ0QmVmb3JlKGRpdiwgYWRkRm9ybSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCB7IHBvcHVsYXRlU3RvcmFnZSwgcmV0cml2ZVN0b3JhZ2UsIHByb2plY3RzTGlzdCwgc2hvd1N0b3JhZ2UsIGRlbGV0ZVByb2plY3RMUyB9OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3Qge1xyXG4gICAgY29uc3RydWN0b3IodGl0bGUpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5saXN0ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgYWRkKHRhc2spIHtcclxuICAgICAgICB0aGlzLmxpc3QucHVzaCh0YXNrKTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBUYXNrIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjLCBkdWVEYXRlLCBwcmlvcml0eSwgY29tcGxldGVkID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5kZXNjID0gZGVzYztcclxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXQgaXNDb21wbGV0ZWQoYm9vbCkge1xyXG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gYm9vbDtcclxuICAgIH1cclxufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IFRhc2sgZnJvbSBcIi4vdGFzay5qc1wiO1xyXG5pbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0LmpzXCI7XHJcbmltcG9ydCB7IHBvcHVsYXRlU3RvcmFnZSwgcmV0cml2ZVN0b3JhZ2UsIHByb2plY3RzTGlzdCwgc2hvd1N0b3JhZ2UgfSBmcm9tIFwiLi9sb2NhbFN0b3JhZ2UuanNcIjtcclxuaW1wb3J0IHsgYWRkVGFza0Zvcm1PcGVuQ2xvc2UsIGFkZFByb2plY3RCdG4sIGFkZFRhc2tCdG4sIGluYm94Q29udHJvbGxlciB9IGZyb20gXCIuL2Rpc3BsYXlDb250cm9sbGVyLmpzXCI7XHJcblxyXG4vLyBzaG93U3RvcmFnZSgpO1xyXG4vLyBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuLy8gcHJvamVjdHNMaXN0ID0gW107XHJcblxyXG4vLyBsZXQgdGFzazEgPSBuZXcgVGFzayhcIlpqZXNjXCIsIFwibXVzemUgemplc2MganV0cm8gcmFub1wiLCBcIjIwMjItMTAtMTNcIiwgMyk7XHJcbi8vIGxldCB0YXNrMiA9IG5ldyBUYXNrKFwiWmplc2NcIiwgXCJtdXN6ZSB6amVzYyBqdXRybyByYW5vXCIsIFwiMjAyMi0xMC0xM1wiLCAzKTtcclxuLy8gbGV0IHRhc2szID0gbmV3IFRhc2soXCJaamVzY1wiLCBcIm11c3plIHpqZXNjIGp1dHJvIHJhbm9cIiwgXCIyMDIyLTEwLTEzXCIsIDMpO1xyXG4vLyBsZXQgdGFzazQgPSBuZXcgVGFzayhcIlpqZXNjXCIsIFwibXVzemUgemplc2MganV0cm8gcmFub1wiLCBcIjIwMjItMTAtMTNcIiwgMyk7XHJcbi8vIGxldCB0YXNrNSA9IG5ldyBUYXNrKFwiWmplc2NcIiwgXCJtdXN6ZSB6amVzYyBqdXRybyByYW5vXCIsIFwiMjAyMi0xMC0xM1wiLCAzKTtcclxubGV0IEluYm94ID0gbmV3IFByb2plY3QoXCJJbmJveFwiKTtcclxucHJvamVjdHNMaXN0LnB1c2goSW5ib3gpO1xyXG4vLyBsZXQgRm9jdXMgPSBuZXcgUHJvamVjdChcImZvY3VzXCIpO1xyXG4vLyBJbmJveC5hZGQodGFzazEpO1xyXG4vLyBJbmJveC5hZGQodGFzazIpO1xyXG4vLyBJbmJveC5hZGQodGFzazMpO1xyXG4vLyBGb2N1cy5hZGQodGFzazQpO1xyXG4vLyBGb2N1cy5hZGQodGFzazUpO1xyXG4vLyAvLyBsZXQgRW1wdHkgPSBuZXcgUHJvamVjdChcImVtcHR5XCIpO1xyXG4vLyBwcm9qZWN0c0xpc3QucHVzaChGb2N1cyk7XHJcbi8vIGNvbnNvbGUubG9nKHByb2plY3RzTGlzdCk7XHJcbi8vIHBvcHVsYXRlU3RvcmFnZShwcm9qZWN0c0xpc3QpO1xyXG4vLyBjb25zb2xlLmxvZyhJbmJveCk7XHJcbmNvbnNvbGUubG9nKHByb2plY3RzTGlzdCk7XHJcbmFkZFRhc2tGb3JtT3BlbkNsb3NlKFwiLmFkZFRhc2tcIiwgXCIuY2xvc2VCdG5cIiwgXCIudGFza0Zvcm1cIik7XHJcbmFkZFByb2plY3RCdG4oKTtcclxuYWRkVGFza0J0bigpO1xyXG5pbmJveENvbnRyb2xsZXIoKTtcclxuLy8gcG9wdWxhdGVTdG9yYWdlKHByb2plY3RzTGlzdCk7XHJcbi8vIHJldHJpdmVTdG9yYWdlKCk7Il0sIm5hbWVzIjpbImN1cnJlbnQiLCJhZGRUYXNrRm9ybU9wZW5DbG9zZSIsIm9wZW4iLCJjbG9zZSIsImZvcm0iLCJvcGVuQnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvc2VCdG4iLCJmb3JtQm94IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImNsb3NlRm9ybSIsInZhbHVlIiwib3BlbkZvcm0iLCJnZXROZXdEYXRhIiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImdldE5ld0RhdGFUYXNrIiwiYWRkUHJvamVjdCIsInRpdGxlIiwiaW5kZXgiLCJwcm9qTGlzdCIsImFkZEZvcm0iLCJkaXYiLCJjcmVhdGVFbGVtZW50IiwiZGVsZXRlQnRuIiwicCIsInNldEF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwibmV3UHJvamVjdCIsImFwcGVuZENoaWxkIiwiY2hhbmdlUHJvamVjdCIsImdldEF0dHJpYnV0ZSIsImFsbERpdnMiLCJpIiwiaW5zZXJ0QmVmb3JlIiwiYWRkUHJvamVjdEJ0biIsImFkZEJ0biIsImNsb3NlRm9ybUJ0biIsImFkZEJ1dHRvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0RmllbGQiLCJhZGRUYXNrIiwiY3VycmVudFByb2oiLCJkZXNjIiwiZGF0ZSIsInByaW9yIiwibmV3VGFzayIsImxpc3QiLCJwdXNoIiwic2hvd1Rhc2siLCJpbmJveENvbnRyb2xsZXIiLCJhZGRUYXNrQnRuIiwiaWQiLCJwcm9qRGlzcGxheSIsInByb2pOYW1lIiwiaW5uZXJIVE1MIiwiZm9yRWFjaCIsInRhc2siLCJjb25zb2xlIiwibG9nIiwicmVuZGVyVGFzayIsInRhc2tCb3giLCJjb21wbGV0ZWRJbnB1dCIsImNvbXBsZXRlZCIsImRpdjEiLCJkaXYyIiwic3RhckltZzAiLCJzdGFySW1nMSIsInN0YXJJbWcyIiwic3JjIiwiZXZhbCIsInByaW9yaXR5IiwiZHVlRGF0ZSIsImFsbFRhc2tzIiwic3BsaWNlIiwicHJvamVjdHNMaXN0IiwiUHJvamVjdCIsImNvbnN0cnVjdG9yIiwidGhpcyIsIlRhc2siLCJpc0NvbXBsZXRlZCIsImJvb2wiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJJbmJveCJdLCJzb3VyY2VSb290IjoiIn0=