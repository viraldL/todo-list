(()=>{"use strict";var __webpack_modules__={290:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$X:()=>addTaskFormOpenClose,ZJ:()=>addProjectBtn,pR:()=>addTaskBtn,wZ:()=>inboxController});var _project_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15),_task_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(507),_localStorage_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(158);const addTaskFormOpenClose=function(e,t,o){const c=document.querySelector(e),a=document.querySelector(t),r=document.querySelector(o);c.addEventListener("click",(()=>{r.classList.add("active")})),a.addEventListener("click",(()=>{r.classList.remove("active")}))},closeForm=function(){document.querySelector(".customProjForm").classList.remove("active"),document.querySelector(".projectName").value=""},openForm=function(){document.querySelector(".customProjForm").classList.add("active")},getNewData=function(){return document.querySelectorAll("[data-project]").length},getNewDataTask=function(){return document.querySelectorAll("[data-task]").length},addProject=function(e){const t=getNewData(),o=document.querySelector(".customProjList"),c=document.querySelector("#projForm"),a=document.createElement("div"),r=document.createElement("button"),_=document.createElement("p");a.classList.add("customProj"),a.setAttribute("data-project",`${t}`),_.textContent=e;const s=new _project_js__WEBPACK_IMPORTED_MODULE_0__.Z(e);_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB.push(s),r.setAttribute("data-btn",`${t}`),r.textContent="X",a.appendChild(_),a.appendChild(r),_.addEventListener("click",(()=>{changeProject(a.getAttribute("data-project"))})),r.addEventListener("click",(()=>{a.remove();let e=document.querySelectorAll("[data-project]");_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB.splice(t,1);for(let t=0;t<e.length;t++)e[t].setAttribute("data-project",t)})),o.insertBefore(a,c)},addProjectBtn=function(){const e=document.querySelector(".customProjBtn"),t=document.querySelector("button.close"),o=document.querySelector("button.add");e.addEventListener("click",(()=>{openForm()})),t.addEventListener("click",(()=>{closeForm()})),o.addEventListener("click",(e=>{e.preventDefault();let t=document.querySelector(".projectName");addProject(t.value),closeForm()}))},addTask=function(){let e=_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB[_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.Vk],t=document.querySelector("#taskTitle").value,o=document.querySelector("#taskDesc").value,c=document.querySelector("#taskDate").value,a=document.querySelector("#taskPrior").value;""===c&&(c="No date");const r=new _task_js__WEBPACK_IMPORTED_MODULE_2__.Z(t,o,c,a),_=document.querySelector(".taskForm");e.list.push(r),_.classList.remove("active"),o="",c="",a="",showTask(r)},inboxController=function(){document.querySelector("#inbox").addEventListener("click",(()=>{changeProject(0)}))},addTaskBtn=function(){document.querySelector("#addTask").addEventListener("click",(()=>{addTask(),document.querySelector("#taskTitle").value="",document.querySelector("#taskDesc").value="",document.querySelector("#taskDate").value="",document.querySelector("#taskPrior").value="0"}))},changeProject=function(e){const t=document.querySelector("#projectName"),o=_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB[e].title;document.querySelector("section").innerHTML="",_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB[e].list.forEach((e=>{showTask(e)})),t.textContent=o,_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.Vk=e},renderTask=function(task){let index=getNewDataTask();const taskBox=document.createElement("div");taskBox.classList.add("task"),taskBox.setAttribute("data-task",`${index}`);const completedInput=document.createElement("input");completedInput.setAttribute("type","checkbox"),completedInput.addEventListener("change",(()=>{task.completed=!task.completed,console.log(task)}));const div1=document.createElement("div"),div2=document.createElement("div");div2.classList.add("titlenpri");const title=document.createElement("span");title.classList.add("title"),title.textContent=task.title;const prior=document.createElement("span");prior.classList.add("prior");const starImg0=document.createElement("img"),starImg1=document.createElement("img"),starImg2=document.createElement("img");starImg0.src="images/star-fill.svg",starImg1.src="images/star-fill.svg",starImg2.src="images/star-fill.svg";let i=0;do{eval(`prior.appendChild(starImg${i});`),i++}while(task.priority>=i);const desc=document.createElement("span");desc.classList.add("desc"),desc.textContent=task.desc;const date=document.createElement("span");date.classList.add("dueDate"),date.textContent=task.dueDate;const deleteBtn=document.createElement("button");return deleteBtn.textContent="Delete",deleteBtn.addEventListener("click",(()=>{taskBox.remove();const e=document.querySelectorAll("[data-task]");_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB[_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.Vk].list.splice(index,1);for(let t=0;t<e.length;t++)e[t].setAttribute("data-task",t);console.log(_localStorage_js__WEBPACK_IMPORTED_MODULE_1__.mB)})),div2.appendChild(title),div2.appendChild(prior),div1.appendChild(div2),div1.appendChild(desc),div1.appendChild(date),taskBox.appendChild(completedInput),taskBox.appendChild(div1),taskBox.appendChild(deleteBtn),taskBox},showTask=function(e){document.querySelector("section").appendChild(renderTask(e))}},158:(e,t,o)=>{o.d(t,{Vk:()=>c,mB:()=>a});let c=0,a=[]},15:(e,t,o)=>{o.d(t,{Z:()=>c});class c{constructor(e){this.title=e,this.list=[]}add(e){this.list.push(e)}}},507:(e,t,o)=>{o.d(t,{Z:()=>c});class c{constructor(e,t,o,c,a=!1){this.title=e,this.desc=t,this.dueDate=o,this.priority=c,this.completed=a}set isCompleted(e){this.completed=e}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.d=(e,t)=>{for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{var e=__webpack_require__(15),t=__webpack_require__(158),o=__webpack_require__(290);let c=new e.Z("Inbox");t.mB.push(c),console.log(t.mB),(0,o.$X)(".addTask",".closeBtn",".taskForm"),(0,o.ZJ)(),(0,o.pR)(),(0,o.wZ)()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoic2NBSUEsTUFBTUEscUJBQXVCLFNBQVNDLEVBQU1DLEVBQU9DLEdBQy9DLE1BQU1DLEVBQVVDLFNBQVNDLGNBQWNMLEdBQ2pDTSxFQUFXRixTQUFTQyxjQUFjSixHQUNsQ00sRUFBVUgsU0FBU0MsY0FBY0gsR0FHdkNDLEVBQVFLLGlCQUFpQixTQUFTLEtBQzlCRCxFQUFRRSxVQUFVQyxJQUFJLFNBQVMsSUFHbkNKLEVBQVNFLGlCQUFpQixTQUFTLEtBQy9CRCxFQUFRRSxVQUFVRSxPQUFPLFNBQVMsR0FHMUMsRUFHTUMsVUFBWSxXQUNFUixTQUFTQyxjQUFjLG1CQUMvQkksVUFBVUUsT0FBTyxVQUVSUCxTQUFTQyxjQUFjLGdCQUM3QlEsTUFBUSxFQUN2QixFQUdNQyxTQUFXLFdBQ0dWLFNBQVNDLGNBQWMsbUJBQy9CSSxVQUFVQyxJQUFJLFNBQzFCLEVBR01LLFdBQWEsV0FFZixPQURnQlgsU0FBU1ksaUJBQWlCLGtCQUMzQkMsTUFDbkIsRUFFTUMsZUFBaUIsV0FFbkIsT0FEaUJkLFNBQVNZLGlCQUFpQixlQUMzQkMsTUFDcEIsRUFHTUUsV0FBYSxTQUFTQyxHQUN4QixNQUFNQyxFQUFRTixhQUNSTyxFQUFXbEIsU0FBU0MsY0FBYyxtQkFDbENrQixFQUFVbkIsU0FBU0MsY0FBYyxhQUVqQ21CLEVBQU1wQixTQUFTcUIsY0FBYyxPQUM3QkMsRUFBWXRCLFNBQVNxQixjQUFjLFVBQ25DRSxFQUFJdkIsU0FBU3FCLGNBQWMsS0FFakNELEVBQUlmLFVBQVVDLElBQUksY0FDbEJjLEVBQUlJLGFBQWEsZUFBZ0IsR0FBR1AsS0FDcENNLEVBQUVFLFlBQWNULEVBRWhCLE1BQU1VLEVBQWEsSUFBSSwyQ0FBUVYsR0FDL0Isc0RBQWtCVSxHQU1sQkosRUFBVUUsYUFBYSxXQUFZLEdBQUdQLEtBQ3RDSyxFQUFVRyxZQUFjLElBRXhCTCxFQUFJTyxZQUFZSixHQUNoQkgsRUFBSU8sWUFBWUwsR0FDaEJDLEVBQUVuQixpQkFBaUIsU0FBUyxLQUN4QndCLGNBQWNSLEVBQUlTLGFBQWEsZ0JBQWdCLElBR25EUCxFQUFVbEIsaUJBQWlCLFNBQVMsS0FDaENnQixFQUFJYixTQUNKLElBQUl1QixFQUFVOUIsU0FBU1ksaUJBQWlCLGtCQUN4Qyx3REFBb0JLLEVBQU8sR0FFM0IsSUFBSSxJQUFJYyxFQUFJLEVBQUdBLEVBQUlELEVBQVFqQixPQUFRa0IsSUFDL0JELEVBQVFDLEdBQUdQLGFBQWEsZUFBZ0JPLEVBQzVDLElBRUpiLEVBQVNjLGFBQWFaLEVBQUtELEVBRS9CLEVBSU1jLGNBQWdCLFdBQ2xCLE1BQU1DLEVBQVNsQyxTQUFTQyxjQUFjLGtCQUNoQ2tDLEVBQWVuQyxTQUFTQyxjQUFjLGdCQUN0Q21DLEVBQVlwQyxTQUFTQyxjQUFjLGNBRXpDaUMsRUFBTzlCLGlCQUFpQixTQUFTLEtBQzdCTSxVQUFVLElBR2R5QixFQUFhL0IsaUJBQWlCLFNBQVMsS0FDbkNJLFdBQVcsSUFFZjRCLEVBQVVoQyxpQkFBaUIsU0FBVWlDLElBQ2pDQSxFQUFFQyxpQkFFRixJQUFJQyxFQUFhdkMsU0FBU0MsY0FBYyxnQkFDeENjLFdBQVd3QixFQUFXOUIsT0FDdEJELFdBQVcsR0FHbkIsRUFFTWdDLFFBQVUsV0FDWixJQUFJQyxFQUFjLGlEQUFhLGtEQUMzQnpCLEVBQVFoQixTQUFTQyxjQUFjLGNBQWNRLE1BQzdDaUMsRUFBTzFDLFNBQVNDLGNBQWMsYUFBYVEsTUFDM0NrQyxFQUFPM0MsU0FBU0MsY0FBYyxhQUFhUSxNQUMzQ21DLEVBQVE1QyxTQUFTQyxjQUFjLGNBQWNRLE1BQ3JDLEtBQVRrQyxJQUNDQSxFQUFPLFdBR1gsTUFBTUUsRUFBVSxJQUFJLHdDQUFLN0IsRUFBTzBCLEVBQU1DLEVBQU1DLEdBQ3RDekMsRUFBVUgsU0FBU0MsY0FBYyxhQUN2Q3dDLEVBQVlLLEtBQUtDLEtBQUtGLEdBQ3RCMUMsRUFBUUUsVUFBVUUsT0FBTyxVQUV6Qm1DLEVBQU8sR0FDUEMsRUFBTyxHQUNQQyxFQUFRLEdBQ1JJLFNBQVNILEVBQ2IsRUFFTUksZ0JBQWtCLFdBQ05qRCxTQUFTQyxjQUFjLFVBQy9CRyxpQkFBaUIsU0FBUyxLQUM1QndCLGNBQWMsRUFBRSxHQUV4QixFQUVNc0IsV0FBYSxXQUNBbEQsU0FBU0MsY0FBYyxZQUMvQkcsaUJBQWlCLFNBQVMsS0FDN0JvQyxVQUNBeEMsU0FBU0MsY0FBYyxjQUFjUSxNQUFRLEdBQzdDVCxTQUFTQyxjQUFjLGFBQWFRLE1BQVEsR0FDNUNULFNBQVNDLGNBQWMsYUFBYVEsTUFBUSxHQUM1Q1QsU0FBU0MsY0FBYyxjQUFjUSxNQUFRLEdBQUcsR0FFeEQsRUFFTW1CLGNBQWdCLFNBQVN1QixHQUMzQixNQUFNQyxFQUFjcEQsU0FBU0MsY0FBYyxnQkFDckNvRCxFQUFXLGlEQUFhRixHQUFJbkMsTUFDbENoQixTQUFTQyxjQUFjLFdBQVdxRCxVQUFZLEdBQzlDLGlEQUFhSCxHQUFJTCxLQUFLUyxTQUFRQyxJQUMxQlIsU0FBU1EsRUFBSSxJQUVqQkosRUFBWTNCLFlBQWM0QixFQUMxQixpREFBVUYsQ0FFZCxFQUVNTSxXQUFhLFNBQVNELE1BQ3hCLElBQUl2QyxNQUFRSCxpQkFDWixNQUFNNEMsUUFBVTFELFNBQVNxQixjQUFjLE9BQ3ZDcUMsUUFBUXJELFVBQVVDLElBQUksUUFDdEJvRCxRQUFRbEMsYUFBYSxZQUFhLEdBQUdQLFNBRXJDLE1BQU0wQyxlQUFpQjNELFNBQVNxQixjQUFjLFNBQzlDc0MsZUFBZW5DLGFBQWEsT0FBUSxZQUNwQ21DLGVBQWV2RCxpQkFBaUIsVUFBVSxLQUN0Q29ELEtBQUtJLFdBQWFKLEtBQUtJLFVBQ3ZCQyxRQUFRQyxJQUFJTixLQUFLLElBR3JCLE1BQU1PLEtBQU8vRCxTQUFTcUIsY0FBYyxPQUM5QjJDLEtBQU9oRSxTQUFTcUIsY0FBYyxPQUNwQzJDLEtBQUszRCxVQUFVQyxJQUFJLGFBRW5CLE1BQU1VLE1BQVFoQixTQUFTcUIsY0FBYyxRQUNyQ0wsTUFBTVgsVUFBVUMsSUFBSSxTQUNwQlUsTUFBTVMsWUFBYytCLEtBQUt4QyxNQUV6QixNQUFNNEIsTUFBUTVDLFNBQVNxQixjQUFjLFFBQ3JDdUIsTUFBTXZDLFVBQVVDLElBQUksU0FDcEIsTUFBTTJELFNBQVdqRSxTQUFTcUIsY0FBYyxPQUNsQzZDLFNBQVdsRSxTQUFTcUIsY0FBYyxPQUNsQzhDLFNBQVduRSxTQUFTcUIsY0FBYyxPQUN4QzRDLFNBQVNHLElBQU0sdUJBQ2ZGLFNBQVNFLElBQU0sdUJBQ2ZELFNBQVNDLElBQU0sdUJBRWYsSUFBSXJDLEVBQUksRUFDUixHQUNJc0MsS0FBSyw0QkFBNEJ0QyxPQUNqQ0EsVUFDSXlCLEtBQUtjLFVBQVl2QyxHQUV6QixNQUFNVyxLQUFPMUMsU0FBU3FCLGNBQWMsUUFDcENxQixLQUFLckMsVUFBVUMsSUFBSSxRQUNuQm9DLEtBQUtqQixZQUFjK0IsS0FBS2QsS0FFeEIsTUFBTUMsS0FBTzNDLFNBQVNxQixjQUFjLFFBQ3BDc0IsS0FBS3RDLFVBQVVDLElBQUksV0FDbkJxQyxLQUFLbEIsWUFBYytCLEtBQUtlLFFBRXhCLE1BQU1qRCxVQUFZdEIsU0FBU3FCLGNBQWMsVUF1QnpDLE9BdEJBQyxVQUFVRyxZQUFjLFNBRXhCSCxVQUFVbEIsaUJBQWlCLFNBQVMsS0FDaENzRCxRQUFRbkQsU0FDUixNQUFNaUUsRUFBV3hFLFNBQVNZLGlCQUFpQixlQUMzQyxpREFBYSxrREFBU2tDLEtBQUsyQixPQUFPeEQsTUFBTyxHQUN6QyxJQUFJLElBQUljLEVBQUksRUFBR0EsRUFBSXlDLEVBQVMzRCxPQUFRa0IsSUFDaEN5QyxFQUFTekMsR0FBR1AsYUFBYSxZQUFhTyxHQUUxQzhCLFFBQVFDLElBQUksaURBQWEsSUFHN0JFLEtBQUtyQyxZQUFZWCxPQUNqQmdELEtBQUtyQyxZQUFZaUIsT0FFakJtQixLQUFLcEMsWUFBWXFDLE1BQ2pCRCxLQUFLcEMsWUFBWWUsTUFDakJxQixLQUFLcEMsWUFBWWdCLE1BQ2pCZSxRQUFRL0IsWUFBWWdDLGdCQUNwQkQsUUFBUS9CLFlBQVlvQyxNQUNwQkwsUUFBUS9CLFlBQVlMLFdBRWJvQyxPQUNYLEVBRU1WLFNBQVcsU0FBU1EsR0FDTnhELFNBQVNDLGNBQWMsV0FDL0IwQixZQUFZOEIsV0FBV0QsR0FDbkMsQywyQ0M1T0EsSUFBSWtCLEVBQVUsRUFDVkMsRUFBYyxFLGdDQ0ZILE1BQU1DLEVBQ2pCQyxZQUFZN0QsR0FDUjhELEtBQUs5RCxNQUFRQSxFQUNiOEQsS0FBS2hDLEtBQU8sRUFDaEIsQ0FFQXhDLElBQUlrRCxHQUNBc0IsS0FBS2hDLEtBQUtDLEtBQUtTLEVBQ25CLEUsaUNDUlcsTUFBTXVCLEVBQ2pCRixZQUFZN0QsRUFBTzBCLEVBQU02QixFQUFTRCxFQUFVVixHQUFZLEdBQ3BEa0IsS0FBSzlELE1BQVFBLEVBQ2I4RCxLQUFLcEMsS0FBT0EsRUFDWm9DLEtBQUtQLFFBQVVBLEVBQ2ZPLEtBQUtSLFNBQVdBLEVBQ2hCUSxLQUFLbEIsVUFBWUEsQ0FDckIsQ0FFSW9CLGdCQUFZQyxHQUNaSCxLQUFLbEIsVUFBWXFCLENBQ3JCLEUsR0NWQUMseUJBQTJCLENBQUMsRUFHaEMsU0FBU0Msb0JBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCx5QkFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTix5QkFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLG9CQUFvQkwsR0FBVUksRUFBUUEsRUFBT0QsUUFBU0oscUJBRy9DSyxFQUFPRCxPQUNmLENDckJBSixvQkFBb0JPLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYUixvQkFBb0JVLEVBQUVGLEVBQVlDLEtBQVNULG9CQUFvQlUsRUFBRU4sRUFBU0ssSUFDNUVFLE9BQU9DLGVBQWVSLEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxJQUUxRSxFQ05EVCxvQkFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsRyxxSENjbEYsSUFBSUksRUFBUSxJQUFJLElBQVEsU0FDeEIsVUFBa0JBLEdBWWxCMUMsUUFBUUMsSUFBSSxPQUNaLFFBQXFCLFdBQVksWUFBYSxjQUM5QyxXQUNBLFdBQ0EsUyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kaXNwbGF5Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbG9jYWxTdG9yYWdlLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy90YXNrLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvamVjdCBmcm9tIFwiLi9wcm9qZWN0LmpzXCI7XHJcbmltcG9ydCBUYXNrIGZyb20gXCIuL3Rhc2suanNcIjtcclxuaW1wb3J0IHsgcG9wdWxhdGVTdG9yYWdlLCByZXRyaXZlU3RvcmFnZSwgcHJvamVjdHNMaXN0LCBkZWxldGVQcm9qZWN0TFMsIHNob3dTdG9yYWdlLCBjdXJyZW50IH0gZnJvbSBcIi4vbG9jYWxTdG9yYWdlLmpzXCI7XHJcblxyXG5jb25zdCBhZGRUYXNrRm9ybU9wZW5DbG9zZSA9IGZ1bmN0aW9uKG9wZW4sIGNsb3NlLCBmb3JtKSB7XHJcbiAgICBjb25zdCBvcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcGVuKTtcclxuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbG9zZSk7XHJcbiAgICBjb25zdCBmb3JtQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtKTtcclxuXHJcbiAgICAvL29wZW4gZm9ybSBmb3IgYWRkaW5nIHRhc2tcclxuICAgIG9wZW5CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBmb3JtQm94LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICAgIC8vY2xvc2UgZm9ybSBmb3IgYWRkaW5nIHRhc2tcclxuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgZm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG4vL2Nsb3NlIHByb2plY3QgYWRkIGZvcm1cclxuY29uc3QgY2xvc2VGb3JtID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBhZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXN0b21Qcm9qRm9ybVwiKTtcclxuICAgIGFkZEZvcm0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuXHJcbiAgICBsZXQgaW5wdXRGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdE5hbWVcIik7XHJcbiAgICBpbnB1dEZpZWxkLnZhbHVlID0gXCJcIlxyXG59XHJcblxyXG4vL29wZW4gcHJvamVjdCBhZGQgZm9ybVxyXG5jb25zdCBvcGVuRm9ybSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgYWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tUHJvakZvcm1cIik7XHJcbiAgICBhZGRGb3JtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbn1cclxuXHJcbi8vZ2V0IG51bWJlciBvZiBwcm9qZWN0c1xyXG5jb25zdCBnZXROZXdEYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBhbGxQcm9qID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXByb2plY3RdXCIpOyBcclxuICAgIHJldHVybiBhbGxQcm9qLmxlbmd0aDtcclxufVxyXG5cclxuY29uc3QgZ2V0TmV3RGF0YVRhc2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGFsbFRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLXRhc2tdXCIpOyBcclxuICAgIHJldHVybiBhbGxUYXNrcy5sZW5ndGg7XHJcbn1cclxuXHJcbi8vYWRkIHByb2plY3QgdG8gdGhlIGxpc3RcclxuY29uc3QgYWRkUHJvamVjdCA9IGZ1bmN0aW9uKHRpdGxlKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGdldE5ld0RhdGEoKTtcclxuICAgIGNvbnN0IHByb2pMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXN0b21Qcm9qTGlzdFwiKTtcclxuICAgIGNvbnN0IGFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2pGb3JtXCIpO1xyXG5cclxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgY29uc3QgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG5cclxuICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tUHJvalwiKTtcclxuICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3RcIiwgYCR7aW5kZXh9YCk7XHJcbiAgICBwLnRleHRDb250ZW50ID0gdGl0bGU7XHJcblxyXG4gICAgY29uc3QgbmV3UHJvamVjdCA9IG5ldyBQcm9qZWN0KHRpdGxlKTtcclxuICAgIHByb2plY3RzTGlzdC5wdXNoKG5ld1Byb2plY3QpO1xyXG4gICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNMaXN0KTtcclxuICAgIC8vIHBvcHVsYXRlU3RvcmFnZShwcm9qZWN0c0xpc3QpO1xyXG4gICAgLy8gY29uc29sZS5sb2cocHJvamVjdHNMaXN0KTtcclxuICAgIC8vIHNob3dTdG9yYWdlKCk7XHJcblxyXG4gICAgZGVsZXRlQnRuLnNldEF0dHJpYnV0ZShcImRhdGEtYnRuXCIsIGAke2luZGV4fWApO1xyXG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJYXCI7XHJcblxyXG4gICAgZGl2LmFwcGVuZENoaWxkKHApO1xyXG4gICAgZGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XHJcbiAgICBwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgY2hhbmdlUHJvamVjdChkaXYuZ2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QnKSk7XHJcbiAgICB9KVxyXG5cclxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGRpdi5yZW1vdmUoKTtcclxuICAgICAgICBsZXQgYWxsRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1wcm9qZWN0XVwiKTtcclxuICAgICAgICBwcm9qZWN0c0xpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0c0xpc3QpO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBhbGxEaXZzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgYWxsRGl2c1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdCcsIGkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBwcm9qTGlzdC5pbnNlcnRCZWZvcmUoZGl2LCBhZGRGb3JtKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHByb2plY3RzTGlzdCk7XHJcbn1cclxuXHJcblxyXG4vL2NvbnRyb2wgYWRkIHByb2plY3QgZnJvbSBidXR0b25zXHJcbmNvbnN0IGFkZFByb2plY3RCdG4gPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tUHJvakJ0blwiKTtcclxuICAgIGNvbnN0IGNsb3NlRm9ybUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24uY2xvc2VcIilcclxuICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24uYWRkXCIpO1xyXG5cclxuICAgIGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIG9wZW5Gb3JtKCk7XHJcbiAgICB9KVxyXG5cclxuICAgIGNsb3NlRm9ybUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGNsb3NlRm9ybSgpO1xyXG4gICAgfSlcclxuICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgLy8gbGV0IGluZGV4ID0gZ2V0TmV3RGF0YSgpO1xyXG4gICAgICAgIGxldCBpbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0TmFtZVwiKTtcclxuICAgICAgICBhZGRQcm9qZWN0KGlucHV0RmllbGQudmFsdWUpO1xyXG4gICAgICAgIGNsb3NlRm9ybSgpO1xyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbmNvbnN0IGFkZFRhc2sgPSBmdW5jdGlvbigpIHtcclxuICAgIGxldCBjdXJyZW50UHJvaiA9IHByb2plY3RzTGlzdFtjdXJyZW50XTtcclxuICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza1RpdGxlXCIpLnZhbHVlO1xyXG4gICAgbGV0IGRlc2MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tEZXNjXCIpLnZhbHVlO1xyXG4gICAgbGV0IGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tEYXRlXCIpLnZhbHVlO1xyXG4gICAgbGV0IHByaW9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrUHJpb3JcIikudmFsdWU7XHJcbiAgICBpZihkYXRlID09PSBcIlwiKXtcclxuICAgICAgICBkYXRlID0gXCJObyBkYXRlXCJcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBuZXdUYXNrID0gbmV3IFRhc2sodGl0bGUsIGRlc2MsIGRhdGUsIHByaW9yKTtcclxuICAgIGNvbnN0IGZvcm1Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tGb3JtXCIpO1xyXG4gICAgY3VycmVudFByb2oubGlzdC5wdXNoKG5ld1Rhc2spO1xyXG4gICAgZm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgLy8gY29uc29sZS5sb2coY3VycmVudFByb2opO1xyXG4gICAgZGVzYyA9IFwiXCI7XHJcbiAgICBkYXRlID0gXCJcIjtcclxuICAgIHByaW9yID0gXCJcIjtcclxuICAgIHNob3dUYXNrKG5ld1Rhc2spXHJcbn1cclxuXHJcbmNvbnN0IGluYm94Q29udHJvbGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgaW5ib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2luYm94XCIpO1xyXG4gICAgaW5ib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBjaGFuZ2VQcm9qZWN0KDApO1xyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgYWRkVGFza0J0biA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgYWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRUYXNrXCIpO1xyXG4gICAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgYWRkVGFzaygpO1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFza1RpdGxlXCIpLnZhbHVlID0gXCJcIjtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tEZXNjXCIpLnZhbHVlID0gXCJcIjtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tEYXRlXCIpLnZhbHVlID0gXCJcIjtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2tQcmlvclwiKS52YWx1ZSA9IFwiMFwiO1xyXG4gICAgfSlcclxufVxyXG5cclxuY29uc3QgY2hhbmdlUHJvamVjdCA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICBjb25zdCBwcm9qRGlzcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdE5hbWVcIik7XHJcbiAgICBjb25zdCBwcm9qTmFtZSA9IHByb2plY3RzTGlzdFtpZF0udGl0bGU7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwic2VjdGlvblwiKS5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgcHJvamVjdHNMaXN0W2lkXS5saXN0LmZvckVhY2godGFzayA9PiB7XHJcbiAgICAgICAgc2hvd1Rhc2sodGFzaylcclxuICAgIH0pXHJcbiAgICBwcm9qRGlzcGxheS50ZXh0Q29udGVudCA9IHByb2pOYW1lO1xyXG4gICAgY3VycmVudCA9IGlkO1xyXG5cclxufVxyXG5cclxuY29uc3QgcmVuZGVyVGFzayA9IGZ1bmN0aW9uKHRhc2spIHtcclxuICAgIGxldCBpbmRleCA9IGdldE5ld0RhdGFUYXNrKCk7XHJcbiAgICBjb25zdCB0YXNrQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRhc2tCb3guY2xhc3NMaXN0LmFkZChcInRhc2tcIik7XHJcbiAgICB0YXNrQm94LnNldEF0dHJpYnV0ZShcImRhdGEtdGFza1wiLCBgJHtpbmRleH1gKTtcclxuXHJcbiAgICBjb25zdCBjb21wbGV0ZWRJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgIGNvbXBsZXRlZElucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcclxuICAgIGNvbXBsZXRlZElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRhc2suY29tcGxldGVkID0gIXRhc2suY29tcGxldGVkO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2spO1xyXG4gICAgfSlcclxuXHJcbiAgICBjb25zdCBkaXYxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGNvbnN0IGRpdjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZGl2Mi5jbGFzc0xpc3QuYWRkKFwidGl0bGVucHJpXCIpO1xyXG5cclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGl0bGVcIik7XHJcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRhc2sudGl0bGU7XHJcblxyXG4gICAgY29uc3QgcHJpb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIHByaW9yLmNsYXNzTGlzdC5hZGQoXCJwcmlvclwiKTtcclxuICAgIGNvbnN0IHN0YXJJbWcwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGNvbnN0IHN0YXJJbWcxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGNvbnN0IHN0YXJJbWcyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIHN0YXJJbWcwLnNyYyA9IFwiaW1hZ2VzL3N0YXItZmlsbC5zdmdcIjtcclxuICAgIHN0YXJJbWcxLnNyYyA9IFwiaW1hZ2VzL3N0YXItZmlsbC5zdmdcIjtcclxuICAgIHN0YXJJbWcyLnNyYyA9IFwiaW1hZ2VzL3N0YXItZmlsbC5zdmdcIjtcclxuXHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICBkbyB7XHJcbiAgICAgICAgZXZhbChgcHJpb3IuYXBwZW5kQ2hpbGQoc3RhckltZyR7aX0pO2ApO1xyXG4gICAgICAgIGkrK1xyXG4gICAgfSB3aGlsZSh0YXNrLnByaW9yaXR5ID49IGkpO1xyXG5cclxuICAgIGNvbnN0IGRlc2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIGRlc2MuY2xhc3NMaXN0LmFkZChcImRlc2NcIik7XHJcbiAgICBkZXNjLnRleHRDb250ZW50ID0gdGFzay5kZXNjO1xyXG5cclxuICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgIGRhdGUuY2xhc3NMaXN0LmFkZChcImR1ZURhdGVcIik7XHJcbiAgICBkYXRlLnRleHRDb250ZW50ID0gdGFzay5kdWVEYXRlO1xyXG5cclxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xyXG5cclxuICAgIGRlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRhc2tCb3gucmVtb3ZlKCk7XHJcbiAgICAgICAgY29uc3QgYWxsVGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtdGFza11cIik7XHJcbiAgICAgICAgcHJvamVjdHNMaXN0W2N1cnJlbnRdLmxpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYWxsVGFza3MubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBhbGxUYXNrc1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFzaycsIGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhwcm9qZWN0c0xpc3QpO1xyXG4gICAgfSlcclxuXHJcbiAgICBkaXYyLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuICAgIGRpdjIuYXBwZW5kQ2hpbGQocHJpb3IpO1xyXG5cclxuICAgIGRpdjEuYXBwZW5kQ2hpbGQoZGl2Mik7XHJcbiAgICBkaXYxLmFwcGVuZENoaWxkKGRlc2MpO1xyXG4gICAgZGl2MS5hcHBlbmRDaGlsZChkYXRlKTtcclxuICAgIHRhc2tCb3guYXBwZW5kQ2hpbGQoY29tcGxldGVkSW5wdXQpO1xyXG4gICAgdGFza0JveC5hcHBlbmRDaGlsZChkaXYxKTtcclxuICAgIHRhc2tCb3guYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRhc2tCb3g7XHJcbn1cclxuXHJcbmNvbnN0IHNob3dUYXNrID0gZnVuY3Rpb24odGFzayl7XHJcbiAgICBjb25zdCBzZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInNlY3Rpb25cIik7XHJcbiAgICBzZWN0aW9uLmFwcGVuZENoaWxkKHJlbmRlclRhc2sodGFzaykpO1xyXG59XHJcblxyXG5cclxuLy9ET0RBSiBSRVRSSVZFUFJPSkVDVFNcclxuXHJcblxyXG5cclxuZXhwb3J0IHsgYWRkVGFza0Zvcm1PcGVuQ2xvc2UsIGFkZFByb2plY3RCdG4sIGFkZFRhc2tCdG4saW5ib3hDb250cm9sbGVyIH07IiwiaW1wb3J0IFByb2plY3QgZnJvbSBcIi4vcHJvamVjdC5qc1wiO1xyXG5sZXQgY3VycmVudCA9IDA7XHJcbmxldCBwcm9qZWN0c0xpc3Q9IFtdO1xyXG5mdW5jdGlvbiBwb3B1bGF0ZVN0b3JhZ2UocHJvamVjdHMpIHtcclxuICAgIGlmKHByb2plY3RzLmxlbmd0aCA+PSAwKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBwcm9qZWN0c2AsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZVByb2plY3RMUyhpbmRleCkge1xyXG4gICAgbGV0IHByb2ogPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBwcm9qZWN0c2ApKTtcclxuICAgIHByb2ouc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIHByb2plY3RzTGlzdCA9IHByb2o7XHJcbiAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgcHJvamVjdHNgLCBKU09OLnN0cmluZ2lmeShwcm9qKSk7XHJcbiAgICBwb3B1bGF0ZVN0b3JhZ2UocHJvamVjdHNMaXN0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmV0cml2ZVN0b3JhZ2UoKSB7XHJcbiAgICBsZXQgcHJvaiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oYHByb2plY3RzYCkpO1xyXG4gICAgaWYocHJvaiAhPT0gbnVsbCkge1xyXG4gICAgICAgIGlmKHByb2oubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDw9IHByb2oubGVuZ3RoIC0gMTsgIGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9qZWN0TmFtZSA9IHByb2pbaV0udGl0bGU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2tzID0gcHJvaltpXS5saXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcm9qZWN0ID0gbmV3IFByb2plY3QocHJvamVjdE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRhc2tzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvamVjdC5hZGQodGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0c0xpc3QucHVzaChwcm9qZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd1N0b3JhZ2UoKSB7XHJcbiAgICAvLyByZXRyaXZlU3RvcmFnZSgpXHJcblxyXG4gICAgY29uc3QgcHJvakxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmN1c3RvbVByb2pMaXN0XCIpO1xyXG4gICAgY29uc3QgYWRkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VzdG9tUHJvakZvcm1cIik7XHJcbiAgICBsZXQgcHJvaiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oYHByb2plY3RzYCkpO1xyXG5cclxuICAgIGlmKHByb2oubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBwcm9qLmxlbmd0aDsgaSsrKSB7ICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwcm9qZWN0TmFtZSA9IHByb2pbaV0udGl0bGU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiY3VzdG9tUHJvalwiKTtcclxuICAgICAgICAgICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3RcIiwgYCR7aX1gKTtcclxuICAgICAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWJ0blwiLCBgJHtpfWApO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gXCJYXCI7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGl2LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZVByb2plY3RMUyhpKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBwcm9qTGlzdC5pbnNlcnRCZWZvcmUoZGl2LCBhZGRGb3JtKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IHsgcG9wdWxhdGVTdG9yYWdlLCByZXRyaXZlU3RvcmFnZSwgcHJvamVjdHNMaXN0LCBzaG93U3RvcmFnZSwgZGVsZXRlUHJvamVjdExTLCBjdXJyZW50IH07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLmxpc3QgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBhZGQodGFzaykge1xyXG4gICAgICAgIHRoaXMubGlzdC5wdXNoKHRhc2spO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2sge1xyXG4gICAgY29uc3RydWN0b3IodGl0bGUsIGRlc2MsIGR1ZURhdGUsIHByaW9yaXR5LCBjb21wbGV0ZWQgPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLmRlc2MgPSBkZXNjO1xyXG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICAgIHRoaXMuY29tcGxldGVkID0gY29tcGxldGVkO1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBpc0NvbXBsZXRlZChib29sKSB7XHJcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQgPSBib29sO1xyXG4gICAgfVxyXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgVGFzayBmcm9tIFwiLi90YXNrLmpzXCI7XHJcbmltcG9ydCBQcm9qZWN0IGZyb20gXCIuL3Byb2plY3QuanNcIjtcclxuaW1wb3J0IHsgcG9wdWxhdGVTdG9yYWdlLCByZXRyaXZlU3RvcmFnZSwgcHJvamVjdHNMaXN0LCBzaG93U3RvcmFnZSB9IGZyb20gXCIuL2xvY2FsU3RvcmFnZS5qc1wiO1xyXG5pbXBvcnQgeyBhZGRUYXNrRm9ybU9wZW5DbG9zZSwgYWRkUHJvamVjdEJ0biwgYWRkVGFza0J0biwgaW5ib3hDb250cm9sbGVyIH0gZnJvbSBcIi4vZGlzcGxheUNvbnRyb2xsZXIuanNcIjtcclxuXHJcbi8vIHNob3dTdG9yYWdlKCk7XHJcbi8vIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG4vLyBwcm9qZWN0c0xpc3QgPSBbXTtcclxuXHJcbi8vIGxldCB0YXNrMSA9IG5ldyBUYXNrKFwiWmplc2NcIiwgXCJtdXN6ZSB6amVzYyBqdXRybyByYW5vXCIsIFwiMjAyMi0xMC0xM1wiLCAzKTtcclxuLy8gbGV0IHRhc2syID0gbmV3IFRhc2soXCJaamVzY1wiLCBcIm11c3plIHpqZXNjIGp1dHJvIHJhbm9cIiwgXCIyMDIyLTEwLTEzXCIsIDMpO1xyXG4vLyBsZXQgdGFzazMgPSBuZXcgVGFzayhcIlpqZXNjXCIsIFwibXVzemUgemplc2MganV0cm8gcmFub1wiLCBcIjIwMjItMTAtMTNcIiwgMyk7XHJcbi8vIGxldCB0YXNrNCA9IG5ldyBUYXNrKFwiWmplc2NcIiwgXCJtdXN6ZSB6amVzYyBqdXRybyByYW5vXCIsIFwiMjAyMi0xMC0xM1wiLCAzKTtcclxuLy8gbGV0IHRhc2s1ID0gbmV3IFRhc2soXCJaamVzY1wiLCBcIm11c3plIHpqZXNjIGp1dHJvIHJhbm9cIiwgXCIyMDIyLTEwLTEzXCIsIDMpO1xyXG5sZXQgSW5ib3ggPSBuZXcgUHJvamVjdChcIkluYm94XCIpO1xyXG5wcm9qZWN0c0xpc3QucHVzaChJbmJveCk7XHJcbi8vIGxldCBGb2N1cyA9IG5ldyBQcm9qZWN0KFwiZm9jdXNcIik7XHJcbi8vIEluYm94LmFkZCh0YXNrMSk7XHJcbi8vIEluYm94LmFkZCh0YXNrMik7XHJcbi8vIEluYm94LmFkZCh0YXNrMyk7XHJcbi8vIEZvY3VzLmFkZCh0YXNrNCk7XHJcbi8vIEZvY3VzLmFkZCh0YXNrNSk7XHJcbi8vIC8vIGxldCBFbXB0eSA9IG5ldyBQcm9qZWN0KFwiZW1wdHlcIik7XHJcbi8vIHByb2plY3RzTGlzdC5wdXNoKEZvY3VzKTtcclxuLy8gY29uc29sZS5sb2cocHJvamVjdHNMaXN0KTtcclxuLy8gcG9wdWxhdGVTdG9yYWdlKHByb2plY3RzTGlzdCk7XHJcbi8vIGNvbnNvbGUubG9nKEluYm94KTtcclxuY29uc29sZS5sb2cocHJvamVjdHNMaXN0KTtcclxuYWRkVGFza0Zvcm1PcGVuQ2xvc2UoXCIuYWRkVGFza1wiLCBcIi5jbG9zZUJ0blwiLCBcIi50YXNrRm9ybVwiKTtcclxuYWRkUHJvamVjdEJ0bigpO1xyXG5hZGRUYXNrQnRuKCk7XHJcbmluYm94Q29udHJvbGxlcigpO1xyXG4vLyBwb3B1bGF0ZVN0b3JhZ2UocHJvamVjdHNMaXN0KTtcclxuLy8gcmV0cml2ZVN0b3JhZ2UoKTsiXSwibmFtZXMiOlsiYWRkVGFza0Zvcm1PcGVuQ2xvc2UiLCJvcGVuIiwiY2xvc2UiLCJmb3JtIiwib3BlbkJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsb3NlQnRuIiwiZm9ybUJveCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJjbG9zZUZvcm0iLCJ2YWx1ZSIsIm9wZW5Gb3JtIiwiZ2V0TmV3RGF0YSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJnZXROZXdEYXRhVGFzayIsImFkZFByb2plY3QiLCJ0aXRsZSIsImluZGV4IiwicHJvakxpc3QiLCJhZGRGb3JtIiwiZGl2IiwiY3JlYXRlRWxlbWVudCIsImRlbGV0ZUJ0biIsInAiLCJzZXRBdHRyaWJ1dGUiLCJ0ZXh0Q29udGVudCIsIm5ld1Byb2plY3QiLCJhcHBlbmRDaGlsZCIsImNoYW5nZVByb2plY3QiLCJnZXRBdHRyaWJ1dGUiLCJhbGxEaXZzIiwiaSIsImluc2VydEJlZm9yZSIsImFkZFByb2plY3RCdG4iLCJhZGRCdG4iLCJjbG9zZUZvcm1CdG4iLCJhZGRCdXR0b24iLCJlIiwicHJldmVudERlZmF1bHQiLCJpbnB1dEZpZWxkIiwiYWRkVGFzayIsImN1cnJlbnRQcm9qIiwiZGVzYyIsImRhdGUiLCJwcmlvciIsIm5ld1Rhc2siLCJsaXN0IiwicHVzaCIsInNob3dUYXNrIiwiaW5ib3hDb250cm9sbGVyIiwiYWRkVGFza0J0biIsImlkIiwicHJvakRpc3BsYXkiLCJwcm9qTmFtZSIsImlubmVySFRNTCIsImZvckVhY2giLCJ0YXNrIiwicmVuZGVyVGFzayIsInRhc2tCb3giLCJjb21wbGV0ZWRJbnB1dCIsImNvbXBsZXRlZCIsImNvbnNvbGUiLCJsb2ciLCJkaXYxIiwiZGl2MiIsInN0YXJJbWcwIiwic3RhckltZzEiLCJzdGFySW1nMiIsInNyYyIsImV2YWwiLCJwcmlvcml0eSIsImR1ZURhdGUiLCJhbGxUYXNrcyIsInNwbGljZSIsImN1cnJlbnQiLCJwcm9qZWN0c0xpc3QiLCJQcm9qZWN0IiwiY29uc3RydWN0b3IiLCJ0aGlzIiwiVGFzayIsImlzQ29tcGxldGVkIiwiYm9vbCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIkluYm94Il0sInNvdXJjZVJvb3QiOiIifQ==